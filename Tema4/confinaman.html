<!DOCTYPE html>
<html lang="es">

<head>
    <title>RASTREAMAN/CONFINAMAN</title>
    <meta charset="UTF-8">
</head>

<body>

    <ol id="lista1">
        <li>Perico</li>
        <li>Juanico</li>
        <ul>
            <li>Jose</li>
            <ul>
                <li>Roman</li>
                <li>Marco</li>
                <li>Rodrigo</li>
            </ul>
            <li>Jose</li>
            <li>Lorenzo</li>
            <ul>
                <li>Dimas</li>
                <li>Gestas</li>
                <li>Malakatos</li>
                <li>Jose</li>
            </ul>
        </ul>
        <li>Sofoclis</li>
    </ol>

    <ol id="lista2">
        <li>Periquin</li>
        <li>Juanele</li>
        <li>Jose</li>
    </ol>

    <script>

        let confina = (obj) => {
            Array.from(obj.parentNode.children).map(hijo => {
                if (hijo.tagName == "LI") {
                    hijo.innerHTML += "(C)";
                }
            })
        }

        let recorre = (obj) => {
            if (obj.tagName == "LI") {
                recorre2(document.getElementById("lista1"), obj.innerHTML)
            } else {
                Array.from(obj.children).map(e => recorre(e))
            }
        }

        let recorre2 = (obj, nombre) => {
            if (obj.tagName == "LI") {
                if (obj.innerHTML.toUpperCase() == nombre.toUpperCase()) {
                    confina(obj);
                }
            } else {
                Array.from(obj.children).map(e => recorre2(e, nombre))
            }
        }

        recorre(document.getElementById("lista2"))
    </script>
</body>

</html>