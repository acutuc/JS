<!DOCTYPE html>
<html lang="es">

<head>
    <title>Ejercicio del OSO</title>
    <meta charset="UTF-8">
</head>

<body>
    <p>
        Realiza un programa que:
    <ul>
        <li>Dado una matriz la rellene con O's y con S's teniendo en cuenta que el número de O's debería ser el doble
            que de S's aproximadamente.</li>
        <li>Realiza la función solitario() que vaya resolviendo el juego. Solamente jugará la máquina.</li>
        <li>Muestra por consola la matriz inicial y la matriz resuelta.</li>
    </ul>
    </p>
    <script>
        //Arrow function que genera un número aleatorio entre los dos que pasemos por parámetro:
        let aleatorio = (min, max) => {
            let horquilla = max - min;
            return Math.round(Math.random() * horquilla + min);
        }

        //Arrow function que genera una matriz con O's y S's. Pasamos por parámetro cuántas filas y columnas queremos:
        let matriz = (filas, columnas) => {
            //Declaramos un array, donde pasaremos por parámetro las columnas
            let arrayBidimensional = new Array(columnas);

            for (let i = 0; i < columnas; i++) {
                //A cada posición del array, le asignamos un nuevo array indicando las filas,
                arrayBidimensional[i] = new Array(filas);

                for (let j = 0; j < filas; j++) {
                    //Si aleatorio es 1 o 3, imprimimos una O, si es 2, imprimimos una S
                    //Habrá un 66% de O's y un 33% de S's.
                    if (aleatorio(1, 3) % 2 != 0) {
                        arrayBidimensional[i][j] = "O";
                    } else {
                        arrayBidimensional[i][j] = "S";
                    }
                }
            }
            return arrayBidimensional;
        }

        //J hor
        //I ver

        //Arrow function que resuelve el ejercicio:
        let resuelveMatriz = (matriz) => {
            for (let i = 0; i < matriz.length; i++) {
                for (let j = 0; j < matriz[i].length; j++) {
                    //Buscamos las "S"
                    if (matriz[i][j] == "S") {
                        //Para ocurrencias horizontales: 
                        if (matriz[i][j - 1] == "O" && matriz[i][j + 1] == "O") {
                            matriz[i][j - 1] = "";
                            matriz[i][j] = "";
                            matriz[i][j + 1] = "";
                        }

                        if ((i - 1 >= 0 && i + 1 < matriz[i].length) || (j - 1 >= 0 && j + 1 <= matriz[i][j].length)) {
                            //Para ocurrencias verticales:
                            if (matriz[i - 1][j] == "O" && matriz[i + 1][j] == "O") {
                                matriz[i - 1][j] = "";
                                matriz[i][j] = "";
                                matriz[i + 1][j] = "";
                                //Para ocurrencias diagonales 1:
                            } if (matriz[i - 1][j - 1] == "O" && matriz[i + 1][j + 1] == "O") {
                                matriz[i - 1][j - 1] = "";
                                matriz[i][j] = "";
                                matriz[i + 1][j + 1] = "";
                                //Para ocurrencias diagonales 2:
                            } if (matriz[i - 1][j + 1] == "O" && matriz[i + 1][j - 1] == "O") {
                                matriz[i - 1][j + 1] = "";
                                matriz[i][j] = "";
                                matriz[i + 1][j - 1] = "";
                            }
                        }
                    }
                }
            }
            return matriz;
        }

        console.log("Inicializamos la matriz:")
        //Declaramos una variable en la que almacenaremos la matriz creada:
        let matrizGenerada = matriz(8, 8);

        console.table(matrizGenerada)

        console.log("Eliminamos los \"OSO\":")

        console.table(resuelveMatriz(matrizGenerada))

    </script>
</body>

</html>