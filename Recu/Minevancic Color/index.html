<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minevancic Color</title>
</head>

<body>
    <h1>Minevancic. Función color.</h1>
    <p>
        <strong><em>"Algunas personas quieren que algo ocurra, otras sueñan con qué pasará, otras hacen que
                suceda"</em></strong>
    </p>
    <p>
        Tenemos una matriz en JavaScript de esta forma:
    </p>
    <p>
        let minas = [<br>
        [0,0,0,0,0,0,0],<br>
        [0,1,0,0,0,0,0],<br>
        [0,1,0,0,0,0,0],<br>
        [0,0,0,0,0,1,0],<br>
        [0,0,0,0,0,1,0],<br>
        [0,0,0,0,0,0,0]<br>
        ];
    </p>
    <p>
        Donde el 1 es una mina y 0 no hay nada.
    </p>
    <p>
        Realiza una función color() que tome como parámetro una matriz de este tipo (hazlo para
        que la matriz pueda tener cualquier número de filas y columnas) y coloque un 2 en las
        casillas donde la mina está a 1 paso de distancia, 3 a dos pasos, 4 a tres pasos y 5 en caso
        contrario.
    </p>
    <p>
        El resultado de ejecutar la función color sería el siguiente:
    </p>
    <p>
        let minas = [<br>
        [2,2,2,3,4,4,4],<br>
        [2,1,2,3,3,3,3],<br>
        [2,1,2,3,2,2,2],<br>
        [2,2,2,3,2,1,2],<br>
        [3,3,3,3,2,1,2],<br>
        [4,4,4,3,2,2,2]<br>
        ];
    </p>
    <p>
    <h3>Resultado del ejercicio: </h3>
    </p>
    <p id="resultado">

    </p>
</body>

<script>
    let resultado = document.getElementById("resultado")

    let minas = [
        [0, 0, 0, 0, 0, 0, 0],
        [0, 1, 0, 0, 0, 0, 0],
        [0, 1, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 1, 0],
        [0, 0, 0, 0, 0, 1, 0],
        [0, 0, 0, 0, 0, 0, 0]
    ];

    //Método que nos devuelve un número entre 0 y max (incluido).
    randomInt = (max) => {
        return Math.floor(Math.random() * max + 1);
    }

    //Método que resuelve el ejercicio:
    color = (matriz) => {
        //Recorremos la matriz por sus columnas:
        for (let i = 0; i < matriz.length; i++) {

            //Recorremos la matriz por sus filas:
            for (let j = 0; j < matriz[i].length; j++) {
                //Si encontramos un 1
                if (matriz[i][j] == 1) {
                    //Comprobamos que los adyacentes no se salga de los límites de la matriz:
                    if (i - 1 >= 0 && i + 1 < matriz.length && j - 1 >= 0 && j + 1 < matriz[i].length) {
                        //Empezamos a comprobar que los adyacentes de las bombas, no sean bombas.
                        if (matriz[i + 1][j] != 1) {
                            matriz[i + 1][j] = 2;
                        }
                        if (matriz[i - 1][j] != 1) {
                            matriz[i - 1][j] = 2;
                        }
                        if (matriz[i][j + 1] != 1) {
                            matriz[i][j + 1] = 2;
                        }
                        if (matriz[i][j - 1] != 1) {
                            matriz[i][j - 1] = 2;
                        }
                        if (matriz[i - 1][j - 1] != 1) {
                            matriz[i - 1][j - 1] = 2;
                        }
                        if (matriz[i - 1][j + 1] != 1) {
                            matriz[i - 1][j + 1] = 2;
                        }
                        if (matriz[i + 1][j - 1] != 1) {
                            matriz[i + 1][j - 1] = 2;
                        }
                        if (matriz[i + 1][j + 1] != 1) {
                            matriz[i + 1][j + 1] = 2;
                        }
                    }
                }
                //Comprobamos los 2:
                if (matriz[i][j] == 2) {
                    if (i - 1 >= 0 && i + 1 < matriz.length && j - 1 >= 0 && j + 1 < matriz[i].length) {
                        //Comprobamos que alrededor de los 2, no se haga nada si hay otro 2 o 1:
                        if (matriz[i + 1][j] != 2 && matriz[i + 1][j] != 1) {
                            matriz[i + 1][j] = 3;
                        }
                        if (matriz[i - 1][j] != 2 && matriz[i - 1][j] != 1) {
                            matriz[i - 1][j] = 3;
                        }
                        if (matriz[i][j + 1] != 2 && matriz[i][j + 1] != 1) {
                            matriz[i][j + 1] = 3;
                        }
                        if (matriz[i][j - 1] != 2 && matriz[i][j - 1] != 1) {
                            matriz[i][j - 1] = 3;
                        }
                        if (matriz[i - 1][j - 1] != 2 && matriz[i - 1][j - 1] != 1) {
                            matriz[i - 1][j - 1] = 3;
                        }
                        if (matriz[i - 1][j + 1] != 2 && matriz[i - 1][j + 1] != 1) {
                            matriz[i - 1][j + 1] = 3;
                        }
                        if (matriz[i + 1][j - 1] != 2 && matriz[i + 1][j - 1] != 1) {
                            matriz[i + 1][j - 1] = 3;
                        }
                        if (matriz[i + 1][j + 1] != 2 && matriz[i + 1][j + 1] != 1) {
                            matriz[i + 1][j + 1] = 3;
                        }
                    }
                }
                //Comprobamos los 3:
                if (matriz[i][j] == 3) {
                    if (i - 1 >= 0 && i + 1 < matriz.length && j - 1 >= 0 && j + 1 < matriz[i].length) {
                        //Comprobamos que alrededor de los 3, no se haga nada si hay otro 3 o 2
                        if (matriz[i + 1][j] != 3 && matriz[i + 1][j] != 2) {
                            matriz[i + 1][j] = 4;
                        }
                        if (matriz[i - 1][j] != 3 && matriz[i - 1][j] != 2) {
                            matriz[i - 1][j] = 4;
                        }
                        if (matriz[i][j + 1] != 3 && matriz[i][j + 1] != 2) {
                            matriz[i][j + 1] = 4;
                        }
                        if (matriz[i][j - 1] != 3 && matriz[i][j - 1] != 2) {
                            matriz[i][j - 1] = 4;
                        }
                        if (matriz[i - 1][j - 1] != 3 && matriz[i - 1][j - 1] != 2) {
                            matriz[i - 1][j - 1] = 4;
                        }
                        if (matriz[i - 1][j + 1] != 3 && matriz[i - 1][j + 1] != 2) {
                            matriz[i - 1][j + 1] = 4;
                        }
                        if (matriz[i + 1][j - 1] != 3 && matriz[i + 1][j - 1] != 2) {
                            matriz[i + 1][j - 1] = 4;
                        }
                        if (matriz[i + 1][j + 1] != 3 && matriz[i + 1][j + 1] != 2) {
                            matriz[i + 1][j + 1] = 4;
                        }
                    }
                }
                //Comprobamos los 4:
                if (matriz[i][j] == 4) {
                    if (i - 1 >= 0 && i + 1 < matriz.length && j - 1 >= 0 && j + 1 < matriz[i].length) {
                        //Comprobamos que alrededor de los 4, no se haga nada si hay otro 4 o 3
                        if (matriz[i + 1][j] != 4 && matriz[i + 1][j] != 3 && matriz[i + 1][j] != 2 && matriz[i + 1][j] != 1) {
                            matriz[i + 1][j] = 5;
                        }
                        if (matriz[i - 1][j] != 4 && matriz[i - 1][j] != 3 && matriz[i - 1][j] != 2 && matriz[i - 1][j] != 1) {
                            matriz[i - 1][j] = 5;
                        }
                        if (matriz[i][j + 1] != 4 && matriz[i][j + 1] != 3 && matriz[i][j + 1] != 2 && matriz[i][j + 1] != 1) {
                            matriz[i][j + 1] = 5;
                        }
                        if (matriz[i][j - 1] != 4 && matriz[i][j - 1] != 3 && matriz[i][j - 1] != 2 && matriz[i][j - 1] != 1) {
                            matriz[i][j - 1] = 5;
                        }
                        if (matriz[i - 1][j - 1] != 4 && matriz[i - 1][j - 1] != 3 && matriz[i - 1][j - 1] != 2 && matriz[i - 1][j - 1] != 1) {
                            matriz[i - 1][j - 1] = 5;
                        }
                        if (matriz[i - 1][j + 1] != 4 && matriz[i - 1][j + 1] != 3 && matriz[i - 1][j + 1] != 2 && matriz[i - 1][j + 1] != 1) {
                            matriz[i - 1][j + 1] = 5;
                        }
                        if (matriz[i + 1][j - 1] != 4 && matriz[i + 1][j - 1] != 3) {
                            matriz[i + 1][j - 1] = 5;
                        }
                        if (matriz[i + 1][j + 1] != 4 && matriz[i + 1][j + 1] != 3) {
                            matriz[i + 1][j + 1] = 5;
                        }
                    }
                }
            }
        }

        console.table(matriz)
    }

    color(minas)
</script>

</html>